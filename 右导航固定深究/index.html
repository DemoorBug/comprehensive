<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>右侧固定</title>
	<style type="text/css">
	*{
		padding: 0;
		margin:0;
	}
		.fl {
			float: left;
			height: 4000px;
			width: 60%;
			background: green;
		}
		.fr {
			/*position: fixed;*/
			float: right;
			top: 0;
			left: 50%;
			/*margin-left: 120px; */
			height: 1500px;
			width: 370px;
			background: yellow;
			overflow: hidden;
			word-wrap: break-word;
			word-break: normal;
			padding: 5px;
		}
		.cen {
			width: 1000px;
			margin:0 auto;
			position: relative;
		}
		.clearfix:after {
			content: "";
			display: block;
			clear: both;
		}
	</style>
	<script src="http://libs.baidu.com/jquery/1.10.2/jquery.js"></script>
	<script type="text/javascript">
		var jWindow = $(window);
		$(document).ready(function(){
			jWindow.scroll(function(){
				var scrollHeight = jWindow.scrollTop();
				var screenHeight = jWindow.height();
				var sideHeight = $('.fr').height();
				var flHeight = $('.fl').height();
				console.log(scrollHeight)
				if ( scrollHeight+screenHeight >= flHeight ) {
					$('.fr').css({
						'marginLeft' : '120px',
						'position' : 'absolute',
						// 'top' : -(sideHeight-screenHeight)
						'bottom' : 0,
						'top':'auto'
					})
					return
				}

				if ( scrollHeight+screenHeight>sideHeight) {
					$('.fr').css({
						'marginLeft' : '120px',
						'position' : 'fixed',
						'top' : -(sideHeight-screenHeight)
						// 'bottom' : 0
					})
				}else {
					$('.fr').css({
						'marginLeft' : '',
						'position' : 'static',
					})
				}
			})
			window.onload = function (){
				jWindow.trigger('scroll');
			}
			jWindow.resize(function(){
				jWindow.trigger('scroll')
			})
		})
	</script>
</head>
<body>
	<div style="height: 100px;"></div>
	<div class="cen clearfix">
		<div class="fl">1</div>
		<div class="fr">12345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012345678012301234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234545678012345678012345678012345645456780123456780123456780123456454567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234567801234780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780123456780</div>
	</div>
	<div style="height: 200px;"></div>
</body>
</html>